function OrbitControlsModified(t){var e=t.MOUSE;function n(e){this.object=e,this.target=new t.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25;var n,o,i,a,s,r,c,h,m,l,u,d,p=this,b=0,g=0,$=0,f=0,E=1,_=new t.Vector3,v=!1;this.getPolarAngle=function(){return g},this.getAzimuthalAngle=function(){return b},this.setPolarAngle=function(t){g=t,this.forceUpdate()},this.setAzimuthalAngle=function(t){b=t,this.forceUpdate()},this.rotateLeft=function(t){f-=t},this.rotateUp=function(t){$-=t},this.panLeft=(n=new t.Vector3,function t(e){var o=this.object.matrix.elements;n.set(o[0],o[1],o[2]),n.multiplyScalar(-e),_.add(n)}),this.panUp=(o=new t.Vector3,function t(e){var n=this.object.matrix.elements;o.set(n[4],n[5],n[6]),o.multiplyScalar(e),_.add(o)}),this.pan=function(e,n,o,i){if(p.object instanceof t.PerspectiveCamera){var a=p.object.position.clone().sub(p.target).length();a*=Math.tan(p.object.fov/2*Math.PI/180),p.panLeft(2*e*a/i),p.panUp(2*n*a/i)}else p.object instanceof t.OrthographicCamera?(p.panLeft(e*(p.object.right-p.object.left)/o),p.panUp(n*(p.object.top-p.object.bottom)/i)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){p.object instanceof t.PerspectiveCamera?E/=e:p.object instanceof t.OrthographicCamera?(p.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*e)),p.object.updateProjectionMatrix(),v=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(e){p.object instanceof t.PerspectiveCamera?E*=e:p.object instanceof t.OrthographicCamera?(p.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/e)),p.object.updateProjectionMatrix(),v=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.forceUpdate=(i=new t.Vector3,s=(a=new t.Quaternion().setFromUnitVectors(e.up,new t.Vector3(0,1,0))).clone().inverse(),r=new t.Vector3,c=new t.Quaternion,function(){var t=this.object.position;i.copy(t).sub(this.target),i.applyQuaternion(a),b=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,b)),g=Math.max(1e-6,Math.min(Math.PI-1e-6,g=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,g))));var e=i.length()*E;return e=Math.max(this.minDistance,Math.min(this.maxDistance,e)),this.target.add(_),i.x=e*Math.sin(g)*Math.sin(b),i.y=e*Math.cos(g),i.z=e*Math.sin(g)*Math.cos(b),i.applyQuaternion(s),t.copy(this.target).add(i),this.object.lookAt(this.target),!0===this.enableDamping?(f*=1-this.dampingFactor,$*=1-this.dampingFactor):(f=0,$=0),E=1,_.set(0,0,0),!!(v||r.distanceToSquared(this.object.position)>1e-6||8*(1-c.dot(this.object.quaternion))>1e-6)&&(r.copy(this.object.position),c.copy(this.object.quaternion),v=!1,!0)}),this.update=(h=new t.Vector3,l=(m=new t.Quaternion().setFromUnitVectors(e.up,new t.Vector3(0,1,0))).clone().inverse(),u=new t.Vector3,d=new t.Quaternion,function(){var t=this.object.position;h.copy(t).sub(this.target),h.applyQuaternion(m),b=Math.atan2(h.x,h.z),g=Math.atan2(Math.sqrt(h.x*h.x+h.z*h.z),h.y),b+=f,g+=$,b=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,b)),g=Math.max(1e-6,Math.min(Math.PI-1e-6,g=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,g))));var e=h.length()*E;return e=Math.max(this.minDistance,Math.min(this.maxDistance,e)),this.target.add(_),h.x=e*Math.sin(g)*Math.sin(b),h.y=e*Math.cos(g),h.z=e*Math.sin(g)*Math.cos(b),h.applyQuaternion(l),t.copy(this.target).add(h),this.object.lookAt(this.target),!0===this.enableDamping?(f*=1-this.dampingFactor,$*=1-this.dampingFactor):(f=0,$=0),E=1,_.set(0,0,0),!!(v||u.distanceToSquared(this.object.position)>1e-6||8*(1-d.dot(this.object.quaternion))>1e-6)&&(u.copy(this.object.position),d.copy(this.object.quaternion),v=!1,!0)})}function o(e,o){var i=new n(e);this.domElement=void 0!==o?o:document,Object.defineProperty(this,"constraint",{get:function(){return i}}),this.getPolarAngle=function(){return i.getPolarAngle()},this.getAzimuthalAngle=function(){return i.getAzimuthalAngle()},this.setPolarAngle=function(t){return i.setPolarAngle(t)},this.setAzimuthalAngle=function(t){return i.setAzimuthalAngle(t)},this.enabled=!0,this.center=this.target,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:t.MOUSE.LEFT,ZOOM:t.MOUSE.MIDDLE,PAN:t.MOUSE.RIGHT};var a=this,s=new t.Vector2,r=new t.Vector2,c=new t.Vector2,h=new t.Vector2,m=new t.Vector2,l=new t.Vector2,u=new t.Vector2,d=new t.Vector2,p=new t.Vector2,b={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},g=b.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var $={type:"change"},f={type:"start"},E={type:"end"};function _(t,e){var n=a.domElement===document?a.domElement.body:a.domElement;i.pan(t,e,n.clientWidth,n.clientHeight)}function v(){return Math.pow(.95,a.zoomSpeed)}function y(t){if(!1!==a.enabled){if(t.preventDefault(),t.button===a.mouseButtons.ORBIT){if(!1===a.enableRotate)return;g=b.ROTATE,s.set(t.clientX,t.clientY)}else if(t.button===a.mouseButtons.ZOOM){if(!1===a.enableZoom)return;g=b.DOLLY,u.set(t.clientX,t.clientY)}else if(t.button===a.mouseButtons.PAN){if(!1===a.enablePan)return;g=b.PAN,h.set(t.clientX,t.clientY)}g!==b.NONE&&(document.addEventListener("mousemove",A,!1),document.addEventListener("mouseup",O,!1),a.dispatchEvent(f))}}function A(t){if(!1!==a.enabled){t.preventDefault();var e=a.domElement===document?a.domElement.body:a.domElement;if(g===b.ROTATE){if(!1===a.enableRotate)return;r.set(t.clientX,t.clientY),c.subVectors(r,s),i.rotateLeft(2*Math.PI*c.x/e.clientWidth*a.rotateSpeed),i.rotateUp(2*Math.PI*c.y/e.clientHeight*a.rotateSpeed),s.copy(r)}else if(g===b.DOLLY){if(!1===a.enableZoom)return;d.set(t.clientX,t.clientY),p.subVectors(d,u),p.y>0?i.dollyIn(v()):p.y<0&&i.dollyOut(v()),u.copy(d)}else if(g===b.PAN){if(!1===a.enablePan)return;m.set(t.clientX,t.clientY),l.subVectors(m,h),_(l.x,l.y),h.copy(m)}g!==b.NONE&&a.update()}}function O(){!1!==a.enabled&&(document.removeEventListener("mousemove",A,!1),document.removeEventListener("mouseup",O,!1),a.dispatchEvent(E),g=b.NONE)}function P(t){if(!1!==a.enabled&&!1!==a.enableZoom&&g===b.NONE){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?i.dollyOut(v()):e<0&&i.dollyIn(v()),a.update(),a.dispatchEvent(f),a.dispatchEvent(E)}}function w(t){if(!1!==a.enabled&&!1!==a.enableKeys&&!1!==a.enablePan)switch(t.keyCode){case a.keys.UP:_(0,a.keyPanSpeed),a.update();break;case a.keys.BOTTOM:_(0,-a.keyPanSpeed),a.update();break;case a.keys.LEFT:_(a.keyPanSpeed,0),a.update();break;case a.keys.RIGHT:_(-a.keyPanSpeed,0),a.update()}}function x(t){if(!1!==a.enabled){switch(t.touches.length){case 1:if(!1===a.enableRotate)return;g=b.TOUCH_ROTATE,s.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(!1===a.enableZoom)return;g=b.TOUCH_DOLLY;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;u.set(0,Math.sqrt(e*e+n*n));break;case 3:if(!1===a.enablePan)return;g=b.TOUCH_PAN,h.set(t.touches[0].pageX,t.touches[0].pageY);break;default:g=b.NONE}g!==b.NONE&&a.dispatchEvent(f)}}function T(t){if(!1!==a.enabled){t.preventDefault(),t.stopPropagation();var e=a.domElement===document?a.domElement.body:a.domElement;switch(t.touches.length){case 1:if(!1===a.enableRotate||g!==b.TOUCH_ROTATE)return;r.set(t.touches[0].pageX,t.touches[0].pageY),c.subVectors(r,s),i.rotateLeft(2*Math.PI*c.x/e.clientWidth*a.rotateSpeed),i.rotateUp(2*Math.PI*c.y/e.clientHeight*a.rotateSpeed),s.copy(r),a.update();break;case 2:if(!1===a.enableZoom||g!==b.TOUCH_DOLLY)return;var n=t.touches[0].pageX-t.touches[1].pageX,o=t.touches[0].pageY-t.touches[1].pageY;d.set(0,Math.sqrt(n*n+o*o)),p.subVectors(d,u),p.y>0?i.dollyOut(v()):p.y<0&&i.dollyIn(v()),u.copy(d),a.update();break;case 3:if(!1===a.enablePan||g!==b.TOUCH_PAN)return;m.set(t.touches[0].pageX,t.touches[0].pageY),l.subVectors(m,h),_(l.x,l.y),h.copy(m),a.update();break;default:g=b.NONE}}}function L(){!1!==a.enabled&&(a.dispatchEvent(E),g=b.NONE)}function j(t){t.preventDefault()}this.update=function(){this.autoRotate&&g===b.NONE&&i.rotateLeft(2*Math.PI/60/60*a.autoRotateSpeed),!0===i.update()&&this.dispatchEvent($)},this.reset=function(){g=b.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent($),this.update()},this.dispose=function(){this.domElement.removeEventListener("contextmenu",j,!1),this.domElement.removeEventListener("mousedown",y,!1),this.domElement.removeEventListener("mousewheel",P,!1),this.domElement.removeEventListener("MozMousePixelScroll",P,!1),this.domElement.removeEventListener("touchstart",x,!1),this.domElement.removeEventListener("touchend",L,!1),this.domElement.removeEventListener("touchmove",T,!1),document.removeEventListener("mousemove",A,!1),document.removeEventListener("mouseup",O,!1),window.removeEventListener("keydown",w,!1)},this.domElement.addEventListener("contextmenu",j,!1),this.domElement.addEventListener("mousedown",y,!1),this.domElement.addEventListener("mousewheel",P,!1),this.domElement.addEventListener("MozMousePixelScroll",P,!1),this.domElement.addEventListener("touchstart",x,!1),this.domElement.addEventListener("touchend",L,!1),this.domElement.addEventListener("touchmove",T,!1),window.addEventListener("keydown",w,!1),this.update()}return e||(e={LEFT:0,MIDDLE:1,RIGHT:2}),o.prototype=Object.create(t.EventDispatcher.prototype),o.prototype.constructor=o,Object.defineProperties(o.prototype,{object:{get:function(){return this.constraint.object}},target:{get:function(){return this.constraint.target},set:function(t){console.warn("THREE.OrbitControls: target is now immutable. Use target.set() instead."),this.constraint.target.copy(t)}},minDistance:{get:function(){return this.constraint.minDistance},set:function(t){this.constraint.minDistance=t}},maxDistance:{get:function(){return this.constraint.maxDistance},set:function(t){this.constraint.maxDistance=t}},minZoom:{get:function(){return this.constraint.minZoom},set:function(t){this.constraint.minZoom=t}},maxZoom:{get:function(){return this.constraint.maxZoom},set:function(t){this.constraint.maxZoom=t}},minPolarAngle:{get:function(){return this.constraint.minPolarAngle},set:function(t){this.constraint.minPolarAngle=t}},maxPolarAngle:{get:function(){return this.constraint.maxPolarAngle},set:function(t){this.constraint.maxPolarAngle=t}},minAzimuthAngle:{get:function(){return this.constraint.minAzimuthAngle},set:function(t){this.constraint.minAzimuthAngle=t}},maxAzimuthAngle:{get:function(){return this.constraint.maxAzimuthAngle},set:function(t){this.constraint.maxAzimuthAngle=t}},enableDamping:{get:function(){return this.constraint.enableDamping},set:function(t){this.constraint.enableDamping=t}},dampingFactor:{get:function(){return this.constraint.dampingFactor},set:function(t){this.constraint.dampingFactor=t}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(t){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!t}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(t){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=t}}}),o}OrbitControls=OrbitControlsModified(THREE);